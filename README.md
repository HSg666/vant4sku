

# Vant4 SKU ç™¾å®ç®±ä½¿ç”¨æ–‡æ¡£

## âš™ï¸ å‰ç½®æŠ€æœ¯è¦æ±‚

- **Vue ç‰ˆæœ¬**ï¼šVue 3.x
- **Vant ç‰ˆæœ¬**ï¼šVant 4.xï¼ˆå·²å®‰è£…ï¼‰
- **Node ç‰ˆæœ¬**ï¼šæœ€ä½è¦æ±‚ 18.20.2 æˆ– 20.19.3åŠä»¥ä¸Š
- **PostCSS æ’ä»¶**ï¼šé¡¹ç›®å·²å®‰è£… `postcss-px-to-viewport` æˆ–ç±»ä¼¼è‡ªé€‚åº”æ’ä»¶
- **è®¾è®¡ç¨¿æ”¯æŒ**ï¼š é»˜è®¤é€‚é… 750px è®¾è®¡ç¨¿ï¼Œè‡ªåŠ¨å…¼å®¹å°å±ï¼ˆ375pxï¼‰ä¸ä¸­å¤§å±è®¾å¤‡

## ğŸ“¦ ç»„ä»¶ä»‹ç»

Vant4 SKU ç™¾å®ç®±æ˜¯ä¸€ä¸ªåŸºäºVant4ç»„ä»¶åº“äºŒæ¬¡å¼€å‘çš„å•†å“è§„æ ¼é€‰æ‹©å™¨ï¼Œéµå¾ª MIT åè®®ã€‚

æ”¯æŒï¼š

- å¤šè§„æ ¼åŠ¨æ€é€‰æ‹©
- æŒ‡å®šé€‰ä¸­skuç»„åˆ
- åº“å­˜æ£€æµ‹ä¸ç¦ç”¨
- å›¾ç‰‡é¢„è§ˆ
- æ•°é‡é€‰æ‹©å™¨
- åˆ†æœŸä»˜æ¬¾
- è‡ªå®šä¹‰æ’æ§½
- è¡¨å•è¾“å…¥ï¼ˆæ‰‹æœºå·ã€é‚®ç®±ã€æ—¥å†ã€é€‰æ‹©å™¨ã€å¤‡æ³¨ç­‰ï¼‰

 è§„æ ¼åç§°å’Œæ•°é‡æ˜¯ä¸é™åˆ¶çš„ï¼Œä¾‹å¦‚é¢œè‰²ã€å°ºå¯¸ã€ç‰ˆæœ¬ï¼Œä¹Ÿå¯ä»¥æ˜¯å‹å·ã€å†…å­˜ï¼Œè¿™éƒ½æ˜¯ä½ ä¼ å…¥å­—æ®µæ—¶å®šä¹‰çš„ï¼Œéå¸¸è‡ªç”±çš„ä¸€æ¬¾Skuç»„ä»¶ï¼Œå…·ä½“å¦‚ä½•å¤„ç†æ•°æ®åœ¨ä¸‹æ–¹"æ•°æ®ç»“æ„"ä¼šè®²åˆ°ã€‚

ä¸ºä½•å¼€å‘è¿™æ¬¾skuç»„ä»¶å‘¢ï¼Œå› ä¸ºvant4ç»„ä»¶åº“æ²¡æœ‰ï¼Œè¯¢é—®è¿‡å®˜æ–¹æ˜¯å¦ä¼šå¼€å‘ï¼Œç­”å¤æ˜¯ä¸ä¼šã€‚ä½†æˆ‘ç”¨vue3 + vant4 å¼€å‘ç§»åŠ¨ç«¯ç»å¸¸ç”¨åˆ°skuè§„æ ¼é€‰é¡¹ï¼Œæ‰€ä»¥è‡ªå·±æ•´åˆä¸€ä¸‹åå¼€å‘å‡ºæ¥äº†ï¼Œæ–¹ä¾¿è‡ªå·±ä½¿ç”¨ï¼ŒåŒæ—¶ä¹Ÿå¼€æºç»™å…„å¼Ÿä»¬ã€‚



**æœ¬ç»„ä»¶å®Œæ•´ç‰ˆæ•ˆæœå›¾**

<img src="https://i-blog.csdnimg.cn/direct/b553c69b067441ecb727858cdd603967.gif" alt="æœ¬ç»„ä»¶å®Œæ•´ç‰ˆæ•ˆæœå›¾"   style="width: 300px;"  />



## ğŸš€ å®‰è£…æ–¹å¼

```bash
# ä½¿ç”¨ npm
npm install vant4-sku

# æˆ–ä½¿ç”¨ yarn
yarn add vant4-sku

# æˆ–ä½¿ç”¨ pnpm
pnpm add vant4-sku
```

## âš ï¸ ä¾èµ–è¯´æ˜

 æœ¬ç»„ä»¶ä¾èµ– [Vant4](https://vant-ui.github.io/vant/#/zh-CN) ï¼Œä½¿ç”¨å‰è¯·ç¡®ä¿é¡¹ç›®ä¸­å·²å®‰è£…å¹¶æ­£ç¡®å¼•å…¥ Vantã€‚ 

```js
// vant4å®‰è£…å‘½ä»¤,é¡¹ç›®å·²å®‰è£…çš„è·³è¿‡è¿™ä¸€æ­¥ï¼Œç›´æ¥çœ‹ä¸‹é¢çš„ä»£ç æ¼”ç¤ºã€‚
npm i vant  # é€šè¿‡ npm å®‰è£…

yarn add vant  # é€šè¿‡ yarn å®‰è£…

pnpm add vant  # é€šè¿‡ pnpm å®‰è£…

bun add vant # é€šè¿‡ Bun å®‰è£…
```

### æ³¨æ„äº‹é¡¹

 ç”±äºæœ¬ç»„ä»¶å†…éƒ¨ä½¿ç”¨äº†å¤šä¸ª Vant ç»„ä»¶ï¼ˆå¦‚ `van-popup`ã€`van-tag`ã€`van-stepper` ç­‰ï¼‰ï¼Œå› æ­¤ç”¨æˆ·å¿…é¡»ç¡®ä¿é¡¹ç›®ä¸­å·²æ­£ç¡®å®‰è£…å¹¶æ³¨å†Œ Vantã€‚ 

#### 1. å…¨å±€å¼•å…¥ Vantï¼ˆæ¨èï¼‰

```js
// main.ts
import { createApp } from 'vue'
import App from './App.vue'
import Vant from 'vant'
import 'vant/lib/index.css'

const app = createApp(App)
app.use(Vant)
app.mount('#app')
```

#### 2. æŒ‰éœ€å¼•å…¥ Vant

å¦‚æœé¡¹ç›®ä¸­ä½¿ç”¨äº†æŒ‰éœ€å¼•å…¥ï¼Œè¯·ç¡®ä¿æ³¨å†Œäº†ä»¥ä¸‹ Vant ç»„ä»¶ï¼š

```js
import {
  Popup,
  Tag,
  Stepper,
  CellGroup,
  Cell,
  Field,
  Calendar,
  Picker,
  ActionBar,
  ActionBarIcon,
  ActionBarButton,
  RadioGroup,
  Radio,
  ImagePreview,
  Icon,
  showToast
} from 'vant'
```

 å¦åˆ™ç»„ä»¶å°†æ— æ³•æ­£å¸¸æ˜¾ç¤ºæˆ–æŠ¥é”™ã€‚ 

## ğŸ¯ ä»£ç æ¼”ç¤º

### 1. åŸºç¡€ç”¨æ³•

   <img src="https://i-blog.csdnimg.cn/direct/c6b86b44afd0427bb66a379a0f629892.png" alt="åŸºç¡€ç”¨æ³•" style="width: 300px;" />



```html
<template>
  <van-button type="primary"  @click="showSkuPopup = true">æ˜¾ç¤ºSkuå•†å“è§„æ ¼</van-button>	
  
  <Vant4Sku 
   v-model="showSkuPopup" 
   :product="productWithSpecs" 
   @addToCart="handleAddToCart" 
   @buyNow="handleBuyNow"
  />
</template>
```

```html
<script setup>
import Vant4Sku from 'vant4-sku'
import { ref, computed } from 'vue'
// æºç ä½ç½®ï¼šè¿™ä¸ªåœ¨ä¸‹é¢çš„æ•°æ®ç»“æ„ â€”â€”> å·¥å…·å‡½æ•°ä¸­
import { generateSpecs } from './utils/generateSpecs'   
  
const showSkuPopup = ref(false) 
const selectedSku = ref({}) // ç»„ä»¶æäº¤çš„skuæ€»æ•°æ®
// å•†å“æ•°æ®ç»“æ„
const product = ref({
  id: 1,
  name: 'XXå•†å“',
  mainImage: 'https://i-blog.csdnimg.cn/direct/78acd709017b4ddd857ce1a89079ab60.jpeg',
  skulist: [
    {
      id: 1,
      price: 199,
      originPrice: 299,
      stock: 100,
      img: 'https://i-blog.csdnimg.cn/direct/78acd709017b4ddd857ce1a89079ab60.jpeg',
      color: 'æ·±ç°ç»¿è‰²',
      size: 'åºŠå•æ¬¾1.8MåºŠ',
    },
    {
      id: 2,
      price: 199,
      originPrice: 299,
      stock: 50,
      img: 'https://i-blog.csdnimg.cn/direct/6f4997df324b465da2b57d0f45944bb9.jpeg',
      color: 'çƒŸç°å¡å…¶',
      size: 'åºŠå•æ¬¾1.5MåºŠ',
    },
  ],
})

// æ˜ å°„å­—æ®µ
const fieldMap = {
  color: 'é¢œè‰²',
  size: 'å°ºå¯¸',
}


// è‡ªåŠ¨ç”Ÿæˆè§„æ ¼ç»“æ„
const productWithSpecs = computed(() => {
  return {
    ...product,
    specs: generateSpecs(product.skulist, fieldMap),
  }
})
console.log(productWithSpecs.value, 'productWithSpecs')

const handleAddToCart = skuobj => {
	selectedSku.value = skuobj.sku
	console.log('åŠ å…¥è´­ç‰©è½¦:', skuobj)
}

const handleBuyNow = skuobj => {
	selectedSku.value = skuobj.sku
	console.log('ç«‹å³è´­ä¹°:', skuobj)
}
</script>

```

### 2.è‡ªå®šä¹‰æ­¥è¿›å™¨ï¼ˆè´­ä¹°æ•°é‡ï¼‰

<img src="https://i-blog.csdnimg.cn/direct/3c8ff890e73e4ca5843099b8fa2bc294.png" alt="è‡ªå®šä¹‰æ­¥è¿›å™¨" style="width: 300px;"  />

```html
<Vant4Sku
 v-model="showSkuPopup"
 :product="productWithSpecs"
 @addToCart="handleAddToCart"
 @buyNow="handleBuyNow"
 :showQuotaText="showQuotaText"
 :quantity-text="showQuantityText"
 :stepper-min="2"
 :stepper-max="10"
 @change-stepper="changeStepper"
/>
```

```js
const showQuotaText = ref(true) // é»˜è®¤éšè—ï¼Œå¯ä¼ å€¼æ˜¾ç¤ºé™è´­æç¤º
const showQuantityText = ref('æˆ‘è¦ä¹°') // æ›´æ”¹è´­ä¹°æ•°é‡æ ‡é¢˜

// ç›‘å¬æ•°é‡
const changeStepper = count => {
	console.log('è´­ä¹°æ•°é‡', count)
}
```

### 3ã€æ’æ§½ä½¿ç”¨

#### â‘ ã€å•é€‰åˆ†æœŸ

<img src="https://i-blog.csdnimg.cn/direct/85631133c43d488b8c7c12b3e899113d.png" alt="å•é€‰åˆ†æœŸ" style="width: 300px;"  />

```html
<Vant4Sku
 v-model="showSkuPopup"
 :product="productWithSpecs"
 @addToCart="handleAddToCart"
 @buyNow="handleBuyNow"
 :installment-options="['0', '3', '6', '12']"
 installment-tips="(*ä»…æ”¯æŒä¿¡ç”¨å¡æ”¯ä»˜)"
 installmentTitle="é€‰æ‹©åˆ†æœŸ"
 :show-installment-tips="showInstallmentTips"
>
  <!-- å•é€‰åˆ†æœŸ -->
  <template #select-installment></template>
</Vant4Sku>
```

```js
/* :installment-optionsæ˜¯åˆ†æœŸæ•°ç»„ï¼Œ0ä¼šè‡ªåŠ¨è½¬åŒ–ä¸º"ä¸åˆ†æœŸ"ã€‚ 
   :installment-tips  å¯è‡ªå®šä¹‰åˆ†æœŸæç¤ºæ–‡æ¡ˆ
    installmentTitle   å¯è‡ªå®šä¹‰ä¿®æ”¹åˆ†æœŸæ ‡é¢˜
*/
const showInstallmentTips = ref(true) // æ˜¯å¦æ˜¾ç¤ºåˆ†æœŸæç¤º
```

#### â‘¡ã€è‡ªå®šä¹‰åˆ’çº¿ä»·

<img src="https://i-blog.csdnimg.cn/direct/33c129019b6e461a99db43557ca60078.png" alt="è‡ªå®šä¹‰åˆ’çº¿ä»·" style="width: 300px;"  />

```html
<Vant4Sku 
 v-model="showSkuPopup" 
 :product="productWithSpecs" 
 @addToCart="handleAddToCart" 
 @buyNow="handleBuyNow"
>
    <!--  ç”¨æˆ·è‡ªå®šä¹‰åˆ’çº¿ä»· -->
		<template #origin-price="{ sku }">
				<span class="origin-price">ç‰¹ä»· Â¥{{ sku?.originPrice?.toFixed(2) }}</span>
		</template>
 </Vant4Sku>
```

æ³¨æ„ï¼šoriginPriceæ˜¯skuç»„åˆå¯¹è±¡çš„åŸä»·ï¼Œskuç»„åˆå¯¹è±¡å¦‚ä¸‹ï¼Œä¸€èˆ¬éƒ½æ˜¯å¤„ç†å¥½æ•°æ®ç»“æ„ä¹‹åä¼ å…¥çš„ã€‚
{ id:1, price:666, originPrice:999 }   priceæ˜¯ä¼˜æƒ ä»·ï¼Œå³çº¢è‰²ä»·æ ¼ã€‚

```css

.origin-price {
	font-size: 22px;
	color: #999;
	text-decoration: line-through;
}
```

#### â‘¢ã€åº•éƒ¨å¤‡ç”¨è‡ªå®šä¹‰æ’æ§½ï¼ˆä¸ºæ‚¨å‡†å¤‡çš„ï¼‰

ä½ç½®ï¼šåœ¨æ•´ä¸ªskuå¼¹çª—åº•éƒ¨ï¼ŒæŒ‰é’®çš„ä¸Šé¢ã€‚

ä¾‹å¦‚ï¼šæœ‰äº›åŒå­¦å¯èƒ½è¦åœ¨skuå¼¹çª—é‡Œé¢åšé€‰æ‹©é…é€åœ°å€ï¼Œå¯ä»¥åœ¨è¿™ä½¿ç”¨vantåœ°å€ç»„ä»¶ç¼–å†™æ ‡ç­¾ä»£ç ã€‚

<img src="https://i-blog.csdnimg.cn/direct/f6451dbc5b774a10a3e45f10b331669b.png" alt="åº•éƒ¨å¤‡ç”¨è‡ªå®šä¹‰æ’æ§½" style="width: 300px;"  />

```html
<Vant4Sku 
 v-model="showSkuPopup" 
 :product="productWithSpecs" 
 @addToCart="handleAddToCart" 
 @buyNow="handleBuyNow"
>
   <!-- å¤‡ç”¨åº•éƒ¨æ’æ§½ -->
   <template #footer>æµ‹è¯•ä¸€ä¸‹å¤‡ç”¨æ’æ§½</template>
</Vant4Sku>
```

###  4ã€è¡¨å•ç›¸å…³

<img src="https://i-blog.csdnimg.cn/direct/424b77905ac640d99d903045adb5ab9a.png" alt="è¡¨å•ç›¸å…³" style="width: 300px;"  />

```html
<Vant4Sku
 v-model="showSkuPopup"
 :product="productWithSpecs"
 @addToCart="handleAddToCart"
 @buyNow="handleBuyNow"
 :showTel="showTel"
 :showEmail="showEmail"
 :showMessages="showMessages"
 :showDate="showDate"
 :showPicker="showPicker"
 :columns="columns"
 select-title="åŸå¸‚"
 :showRemark="showRemark"
/>
```

```js
/* è¿™äº›é»˜è®¤éƒ½æ˜¯éšè—çš„ï¼Œå› ä¸ºä½ ä¸ä¸€å®šéƒ½ä¼šç”¨åˆ°ï¼Œéœ€è¦å†æ‰“å¼€å°±è¡Œã€‚   
		æ‰‹æœºå·ã€é‚®ç®±ã€æ—¥å†ã€é€‰æ‹©å™¨  è¿™å››ä¸ªéƒ½æœ‰åŠ æ ¡éªŒçš„ã€‚åªè¦æœ‰æ˜¾ç¤ºï¼Œä¸€ç‚¹å‡»è´­ä¹°å°±ä¼šæ ¡éªŒã€‚
*/
const showTel = ref(true) // æ˜¾ç¤ºæ‰‹æœºå·è¾“å…¥æ¡†
const showEmail = ref(true) // æ˜¾ç¤ºé‚®ç®±è¾“å…¥æ¡†
const showMessages = ref(true) // æ˜¾ç¤ºç•™è¨€è¾“å…¥æ¡†
const showDate = ref(true) // æ˜¾ç¤ºæ—¥æœŸè¾“å…¥æ¡†
const showPicker = ref(true) // æ˜¾ç¤ºé€‰æ‹©å™¨
const showRemark = ref(true) // æ˜¾ç¤ºå¤‡æ³¨è¾“å…¥æ¡†


// select-title  é€‰æ‹©å™¨æ ‡é¢˜ï¼Œå¯è‡ªå®šä¹‰ï¼Œé»˜è®¤ä¸ºé€‰æ‹©å™¨

// é€‰æ‹©å™¨ä¼ å…¥è¿™æ ·çš„æ•°æ®ç»“æ„ï¼Œç»„ä»¶ç”¨çš„van-picker
const columns = [
	{ text: 'æ­å·', value: 'Hangzhou' },
	{ text: 'å®æ³¢', value: 'Ningbo' },
	{ text: 'æ¸©å·', value: 'Wenzhou' },
	{ text: 'ç»å…´', value: 'Shaoxing' },
	{ text: 'æ¹–å·', value: 'Huzhou' },
]

```
ç‚¹å‡»"ç«‹å³è´­ä¹°"åæ•´ä¸ªskuç»„ä»¶æ‰“å°çš„æ•°æ®å¦‚ä¸‹ï¼š

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/b3975675f81d4969a609eb1957be80ab.png)

### 5ã€å¯ä¼ å…¥æŒ‡å®šskuId

ä½¿ç”¨åœºæ™¯ï¼š

â‘ ã€ä¾‹å¦‚ï¼šåœ¨è´­ç‰©è½¦é‡Œä¿®æ”¹æŸä¸ªå•†å“çš„skuç»„åˆï¼Œä¼ å…¥æŒ‡å®šçš„skuç»„åˆidï¼Œskuå¼¹çª—æ—¶å°±è‡ªåŠ¨åŒ¹é…é€‰ä¸­ã€‚

â‘¡ã€å†ä¾‹å¦‚ï¼šå¤–éƒ¨æŸä¸ªå•†å“è·³è½¬åˆ°å•†å“è¯¦æƒ…æ—¶ï¼Œurlä¸­æºå¸¦skuIdå‚æ•°ï¼Œè¿›æ¥å°±é»˜è®¤é€‰ä¸­ä¼ å…¥çš„skuIdç»„åˆã€‚

å¦‚æœä¼ å…¥çš„skuIdä¸å­˜åœ¨ï¼Œé‚£ä¹ˆä¼šè‡ªåŠ¨é€‰ä¸­å…¶ä»–æœ‰åº“å­˜å¹¶å­˜åœ¨çš„skuç»„åˆã€‚

å‚æ•°è¯´æ˜ï¼šdefaultSkuId æ¥æ”¶stringç±»å‹çš„å€¼

```html
<Vant4Sku 
 v-model="showSkuPopup" 
 :product="productWithSpecs" 
 @addToCart="handleAddToCart" 
 @buyNow="handleBuyNow" 
 :defaultSkuId="5"
/>
```

## æ•°æ®ç»“æ„

### **skuæ•°æ®ç»“æ„**

#### 1ã€å·¥å…·å‡½æ•°

æˆ‘ç»™ä½ å‡†å¤‡äº†è‡ªåŠ¨ç”Ÿæˆè§„æ ¼ç»“æ„çš„å·¥å…·å‡½æ•°ï¼Œåœ¨ä½ é¡¹ç›®çš„utilsæ–‡ä»¶å¤¹ä¸­åˆ›å»ºä¸€ä¸ªå·¥å…·å‡½æ•°tsæ–‡ä»¶ï¼Œç„¶ååœ¨ç»„ä»¶ä¸­å¼•å…¥ã€‚ï¼ˆå¦‚æœæ²¡æœ‰utilsæ–‡ä»¶å°±æ–°å»ºä¸€ä¸ªï¼‰

```js
//  utils/generateSpecs.ts  

/**
 * ä» skulist è‡ªåŠ¨ç”Ÿæˆ specs ç»“æ„ï¼Œå¹¶æ˜ å°„å­—æ®µåä¸ºä¸­æ–‡
 * @param skulist - SKU åˆ—è¡¨
 * @param fieldMap - å­—æ®µåæ˜ å°„è¡¨ï¼Œå¦‚ { color: 'é¢œè‰²' }
 * @returns specs - è§„æ ¼ç»“æ„
 */
export function generateSpecs(
  skulist: Array<Record<string, any>>,
  fieldMap: Record<string, string> = {}
): Array<{ name: string; key: string; options: Array<any> }> {
  if (!skulist || skulist.length === 0) return [];

  // è‡ªåŠ¨ä» fieldMap çš„ key ä¸­æå– includeFields
  const includeFields = Object.keys(fieldMap);

  // åªä» skulist ä¸­æå–æŒ‡å®šå­—æ®µä½œä¸ºè§„æ ¼ç»´åº¦
  const allKeys = [...new Set(skulist.flatMap((sku) => Object.keys(sku)))].filter((key) =>
    includeFields.includes(key)
  );

  // ä¸ºæ¯ä¸ª key ç”Ÿæˆ optionsï¼Œå¹¶æ˜ å°„ä¸­æ–‡å
  const specs = allKeys.map((key) => {
    const options = [...new Set(skulist.map((sku) => sku[key]))].filter(Boolean);
    return {
      name: fieldMap[key] || key, // æ˜¾ç¤ºç”¨çš„ä¸­æ–‡å
      key, // ç”¨äºåŒ¹é…çš„åŸå§‹å­—æ®µå
      options,
    };
  });

  return specs;
}
```

åœ¨ä½ ç»„ä»¶ä¸­å¼•å…¥å·¥å…·å‡½æ•°æ–‡ä»¶ã€‚ä½ å¦‚æœæ²¡é…è·¯å¾„åˆ«åaliaså°±å†™ä½ é¡¹ç›®çš„ç›¸å¯¹è·¯å¾„ ../ï¼Œå·²é…å¯è¿™æ ·å†™@/utilsã€‚

```js
import { generateSpecs } from './utils/generateSpecs' 
```

#### 2ã€å‡†å¤‡å¥½å•†å“æ•°æ®ç»“æ„

skulistæ•°ç»„ä¸‹çš„ç»„åˆå¯¹è±¡æŒ‡å®šå­—æ®µï¼š

è¿™å‡ ä¸ªå¿…é¡»ä¿æŒä¸€è‡´ï¼Œå› ä¸ºç»„ä»¶å†…éƒ¨ä½¿ç”¨åˆ°è¿™äº›å­—æ®µã€‚ å…¶ä»–å­—æ®µéšä¾¿ä½ ä¼ ï¼Œåˆ°æ—¶æˆ‘éƒ½ä¼šè¿”å›ç»™ä½ ã€‚

| å­—æ®µå |        | è¯´æ˜        | ç±»å‹     |
| ---- | ---- | ---- | ----------- | -------  |
| id   |     | ä¸»å•†å“id | Number   |
| name   |    | ä¸»å•†å“åç§° | String   |
| mainImage   |     |  ä¸»å›¾ | String |
|     | img   | skuç»„åˆå›¾ | String |
|     | originPrice   | åŸä»· | Number |
|     | price   | ä¼˜æƒ ä»· | Number |
|     | productCode   | å•†å“ç¼–å· | String |
|     | stock   | åº“å­˜ | Number |

```js
// å•†å“æ•°æ®ç»“æ„
const product = {
  id:1, 
  name: 'XXå•†å“', 
  mainImage: '',  
  // ... å…¶ä»–ä½ ä¼ å…¥çš„ç»„ä»¶æœªç”¨åˆ°çš„å­—æ®µï¼Œåˆ°æ—¶é€‰å®Œskuè§„æ ¼æˆ‘éƒ½ä¼šåŸè·¯è¿”å›ç»™ä½ ã€‚
  skulist: [
    {
      id: 1,
      price: 199,
      originPrice: 299,
      stock: 100,
      img: 'https://i-blog.csdnimg.cn/direct/78acd709017b4ddd857ce1a89079ab60.jpeg',
      color: 'æ·±ç°ç»¿è‰²',
      size: 'åºŠå•æ¬¾1.8MåºŠ',
    },
    {
      id: 2,
      price: 199,
      originPrice: 299,
      stock: 50,
      img: 'https://i-blog.csdnimg.cn/direct/6f4997df324b465da2b57d0f45944bb9.jpeg',
      color: 'çƒŸç°å¡å…¶',
      size: 'åºŠå•æ¬¾1.5MåºŠ',
    }
  ]
}
```

#### 3ã€æŒ‡å®šè§„æ ¼å­—æ®µï¼Œè‡ªåŠ¨ç”Ÿæˆè§„æ ¼ç»“æ„

è¦ç”¨ä»€ä¹ˆå­—æ®µåšè§„æ ¼å°±å†™ä¸Šï¼Œå·¥å…·å‡½æ•°ä¼šè‡ªåŠ¨è½¬åŒ–ä¸ºç¬¦åˆskuç»„ä»¶çš„è§„æ ¼ç»“æ„ã€‚å†™å‡ ä¸ªå°±å±•ç¤ºå‡ ä¸ªï¼Œæ‰€ä»¥æ–‡ç« å¼€å¤´æˆ‘æ‰è¯´è¿™ä¸ªç»„ä»¶éå¸¸è‡ªç”±ï¼Œå¯¹å¼€å‘è€…éå¸¸å‹å¥½ã€‚

```js
// æ˜ å°„å­—æ®µ
const fieldMap = {
	color: 'é¢œè‰²',
	size: 'å°ºå¯¸',
}

// è‡ªåŠ¨ç”Ÿæˆè§„æ ¼ç»“æ„
const productWithSpecs = computed(() => {
	return {
		...product,
		specs: generateSpecs(product.skulist, fieldMap),
	}
})
console.log(productWithSpecs.value, 'productWithSpecs')

```

**è‡ªåŠ¨åŒ–å¤„ç†åçš„æ•°æ®ç»“æ„å¦‚ä¸‹ï¼š**

tipsï¼šè¦å¤„ç†æˆä¸‹é¢çš„æ•°æ®ç»“æ„ï¼Œä¼ å…¥ç»„ä»¶å°±èƒ½å®Œç¾æ˜¾ç¤ºäº†ã€‚

```js
{
  id:1,
  name: 'XXå•†å“', // ä¸»å•†å“åç§°
  mainImage: '', // ä¸»å›¾
  // ... ä½ ä¼ å…¥çš„å…¶ä»–å•†å“ä¿¡æ¯å­—æ®µ
  skulist:[
    {
      id: 1,
      price: 199,
      originPrice: 299,
      stock: 100,
      img: 'https://i-blog.csdnimg.cn/direct/78acd709017b4ddd857ce1a89079ab60.jpeg',
      color: 'æ·±ç°ç»¿è‰²',
      size: 'åºŠå•æ¬¾1.8MåºŠ',
    },
     {
      id: 2,
      price: 199,
      originPrice: 299,
      stock: 50,
      img: 'https://i-blog.csdnimg.cn/direct/6f4997df324b465da2b57d0f45944bb9.jpeg',
      color: 'çƒŸç°å¡å…¶',
      size: 'åºŠå•æ¬¾1.5MåºŠ',
    }
    
  ]
 specs: [
    {
      name: 'é¢œè‰²',
      key: 'color',
      options: ['æ·±ç°ç»¿è‰²','çƒŸç°å¡å…¶']
    },
    {
      name: 'å°ºå¯¸',
      key: 'size',
      options: ['åºŠå•æ¬¾1.8MåºŠ', 'åºŠå•æ¬¾1.5MåºŠ']
    }
    
	]
}
```



### **é€‰æ‹©å™¨çš„æ•°ç»„ç»“æ„**

```js
const columns = [
	{ text: 'æ­å·', value: 'Hangzhou' },
	{ text: 'å®æ³¢', value: 'Ningbo' },
	{ text: 'æ¸©å·', value: 'Wenzhou' },
	{ text: 'ç»å…´', value: 'Shaoxing' },
	{ text: 'æ¹–å·', value: 'Huzhou' },
]
```



### **ç‚¹å‡»è´­ä¹°æˆ–æ·»åŠ è´­ç‰©è½¦å›è°ƒå‡½æ•°æ¥æ”¶çš„ skuData å¯¹è±¡ç»“æ„**

```js
skuData = {
  id:1, // å•†å“id,
  name: 'XXå•†å“', // ä¸»å•†å“åç§° 
  mainImage: '', // ä¸»å›¾
  // ... å…¶ä»–å•†å“å­—æ®µä¹Ÿéƒ½ä¼šè¿”å›ç»™ä½ 
	// skuç»„åˆå¯¹è±¡
	sku: {
		id: 1, // skuçš„id
		img: 'xxx.jpg',
		originPrice: 1333, // åŸä»·
		price: 333, // ä¼˜æƒ ä»·
		productCode: 'ABC123456789', // å•†å“ç¼–å·
		stock: 333, // åº“å­˜

		// ... ä¸Šé¢çš„å­—æ®µéƒ½æ˜¯æŒ‡å®šçš„ï¼Œä¸èƒ½å†™é”™ã€‚å…¶ä»–å¤šä½™çš„å­—æ®µæˆ‘ç…§æ ·è¿”å›ç»™ä½ ï¼Œä¾‹å¦‚ä¸‹é¢è¿™äº›ã€‚
		color: 'æ·±ç°ç»¿è‰²', // é¢œè‰²
		size: 'åºŠå•æ¬¾1.5MåºŠ', // å°ºå¯¸
		version: '2010æ¬¾',
		info: 'è¢«å¥—103*103cmï¼› åºŠå•103*103cmï¼› æ•å¥—48*74cm',
	},
	quantity: 1, // è´­ä¹°æ•°é‡
	tel: '123456789101', // æ‰‹æœºå·
	installment: '3', // åˆ†æœŸä»˜æ¬¾
	email: '123456789@qq.com', // é‚®ç®±
	message: '123', // ç•™è¨€
	date: '2025/11/14', // æ—¥æœŸ
	pickerResult: { text: 'æ­å·', value: 'HangZhou' }, // é€‰æ‹©å™¨
	remark: '456', // å¤‡æ³¨
}

```



### å®Œæ•´åŠŸèƒ½é¢„è§ˆå›¾

<img src="https://i-blog.csdnimg.cn/direct/b553c69b067441ecb727858cdd603967.gif" alt="å®Œæ•´åŠŸèƒ½é¢„è§ˆå›¾" style="width: 300px;" />

```html
<template>
	<van-button type="primary"  @click="showSkuPopup = true">æ˜¾ç¤ºSkuå•†å“è§„æ ¼</van-button>		

		<Vant4Sku
			v-model="showSkuPopup"
			:defaultSkuId="5"
			:product="productWithSpecs"
			:showTel="showTel"
			:showEmail="showEmail"
			:showMessages="showMessages"
			:showDate="showDate"
			:showPicker="showPicker"
			:showRemark="showRemark"
			:columns="columns"
			:installment-options="['0', '3', '6', '12']"
			:installment-title="'é€‰æ‹©åˆ†æœŸæ–¹å¼'"
			:installment-tips="'(*ä»…æ”¯æŒä¿¡ç”¨å¡æ”¯ä»˜)'"
			:show-installment-tips="showInstallmentTips"
			:showQuotaText="showQuotaText"
			:stepper-min="2"
			:stepper-max="10"
			@addToCart="handleAddToCart"
			@buyNow="handleBuyNow"
			@change-stepper="changeStepper"
		>
			<!--  ç”¨æˆ·è‡ªå®šä¹‰åˆ’çº¿ä»· -->
			<template #origin-price="{ sku }">
				<span style="font-size: 12px; color: #999; text-decoration: line-through">ç‰¹ä»· Â¥{{ sku?.originPrice?.toFixed(2) }}</span>
			</template>
			<!-- å•é€‰åˆ†æœŸ -->
			<template #select-installment></template>
			<!-- å¤‡ç”¨åº•éƒ¨æ’æ§½ -->
			<slot name="footer"></slot>
		</Vant4Sku>

</template>
```



```html
<script>
import { ref, computed } from 'vue'
import Vant4Sku from 'vant4-sku'
import { generateSpecs } from './utils/generateSpecs'

  
const showSkuPopup = ref(false) // æ˜¯å¦æ˜¾ç¤ºskuå¼¹çª—
const selectedSku = ref({}) // é€‰ä¸­çš„skuæ€»æ•°æ®
const showTel = ref(true) // æ˜¯å¦æ˜¾ç¤ºæ‰‹æœºå·è¾“å…¥æ¡†
const showEmail = ref(true) // æ˜¯å¦æ˜¾ç¤ºé‚®ç®±è¾“å…¥æ¡†
const showDate = ref(true) // æ˜¯å¦æ˜¾ç¤ºæ—¥æœŸè¾“å…¥æ¡†
const showPicker = ref(true) // æ˜¯å¦æ˜¾ç¤ºé€‰æ‹©å™¨
const showRemark = ref(true) // æ˜¯å¦æ˜¾ç¤ºå¤‡æ³¨è¾“å…¥æ¡†
const showMessages = ref(true) // æ˜¯å¦æ˜¾ç¤ºæ¶ˆæ¯è¾“å…¥æ¡†
const showQuotaText = ref(true) // æ˜¯å¦æ˜¾ç¤ºé™è´­æç¤º
const showQuantityText = ref('æˆ‘è¦ä¹°') // æ›´æ”¹è´­ä¹°æ•°é‡æ ‡é¢˜
const showInstallmentTips = ref(true) // æ˜¯å¦æ˜¾ç¤ºåˆ†æœŸæç¤º
const showImage = ref(false) // æ˜¯å¦æ˜¾ç¤ºå›¾ç‰‡

// å•†å“æ•°æ®ç»“æ„
const product = ref({
  id: 1,
  name: 'XXå•†å“',
  mainImage: 'https://i-blog.csdnimg.cn/direct/78acd709017b4ddd857ce1a89079ab60.jpeg',
  skulist: [
    {
      id: 1,
      price: 199,
      originPrice: 299,
      stock: 100,
      img: 'https://i-blog.csdnimg.cn/direct/78acd709017b4ddd857ce1a89079ab60.jpeg',
      color: 'æ·±ç°ç»¿è‰²',
      size: 'åºŠå•æ¬¾1.8MåºŠ',
    },
    {
      id: 2,
      price: 199,
      originPrice: 299,
      stock: 50,
      img: 'https://i-blog.csdnimg.cn/direct/6f4997df324b465da2b57d0f45944bb9.jpeg',
      color: 'çƒŸç°å¡å…¶',
      size: 'åºŠå•æ¬¾1.5MåºŠ',
    },
  ],
})

// é€‰æ‹©å™¨
const columns = [
	{ text: 'æ­å·', value: 'Hangzhou' },
	{ text: 'å®æ³¢', value: 'Ningbo' },
	{ text: 'æ¸©å·', value: 'Wenzhou' },
	{ text: 'ç»å…´', value: 'Shaoxing' },
	{ text: 'æ¹–å·', value: 'Huzhou' },
]

// æ˜ å°„å­—æ®µ
const fieldMap = {
  color: 'é¢œè‰²',
  size: 'å°ºå¯¸',
}

// è‡ªåŠ¨ç”Ÿæˆè§„æ ¼ç»“æ„
const productWithSpecs = computed(() => {
  return {
    ...product,
    specs: generateSpecs(product.skulist, fieldMap),
  }
})

const handleAddToCart = skuobj => {
	selectedSku.value = skuobj.sku
	console.log('åŠ å…¥è´­ç‰©è½¦:', skuobj)
}

const handleBuyNow = skuobj => {
	selectedSku.value = skuobj.sku
	console.log('ç«‹å³è´­ä¹°:', skuobj)
}

const changeStepper = count => {
	console.log('è´­ä¹°æ•°é‡', count)
}
</script>

```



## ğŸ“š API è¯´æ˜

**Props**
| å‚æ•° | è¯´æ˜ | ç±»å‹ | é»˜è®¤å€¼ |
|------|------|------|--------|
| v-model | æ˜¯å¦æ˜¾ç¤ºå¼¹çª— | Boolean | false |
| product | å•†å“æ•°æ® | Object | skuæ•°æ®ç»“æ„è§ä¸‹æ–¹æ–‡æ¡£ |
| default-sku-id | é»˜è®¤é€‰ä¸­çš„ SKU ID | Number | null |
| show-add-cart-btn | æ˜¯å¦æ˜¾ç¤ºåŠ å…¥è´­ç‰©è½¦æŒ‰é’® | Boolean | true |
| show-image | æ˜¯å¦æ˜¾ç¤ºå›¾ç‰‡ | Boolean | true |
| show-tel | æ˜¯å¦æ˜¾ç¤ºæ‰‹æœºå·è¾“å…¥æ¡† | Boolean | false |
| show-email | æ˜¯å¦æ˜¾ç¤ºé‚®ç®±è¾“å…¥æ¡† | Boolean | false |
| show-messages | æ˜¯å¦æ˜¾ç¤ºç•™è¨€æ¡† | Boolean | false |
| show-remark | æ˜¯å¦æ˜¾ç¤ºå¤‡æ³¨è¾“å…¥æ¡† | Boolean | false |
| show-date | æ˜¯å¦æ˜¾ç¤ºæ—¥å†é€‰æ‹©å™¨ | Boolean | false |
| show-picker | æ˜¯å¦æ˜¾ç¤ºé€‰æ‹©å™¨ | Boolean | false |
| columns | é€‰æ‹©å™¨åˆ—æ•°æ® | Array | [] |
| select-title | é€‰æ‹©å™¨æ ‡é¢˜ | String | é€‰æ‹©å™¨ |
| select-tips | é€‰æ‹©å™¨æç¤ºæ–‡å­— | String | ç‚¹å‡»é€‰æ‹©åŸå¸‚ |
| show-origin-price | æ˜¯å¦æ˜¾ç¤ºåŸä»· | Boolean | true |
| show-stock | æ˜¯å¦æ˜¾ç¤ºåº“å­˜ | Boolean | true |
| show-product-code | æ˜¯å¦æ˜¾ç¤ºå•†å“ç¼–ç  | Boolean | true |
| cart-button-text | è´­ç‰©è½¦æŒ‰é’®æ–‡å­— | String | åŠ å…¥è´­ç‰©è½¦ |
| buy-button-text | è´­ä¹°æŒ‰é’®æ–‡å­— | String | ç«‹å³è´­ä¹° |
| quantityText | è´­ä¹°æ•°é‡æ ‡é¢˜ | String | è´­ä¹°æ•°é‡ |
| stepper-min | æ•°é‡é€‰æ‹©å™¨æœ€å°å€¼ | Number | 1 |
| stepper-max | æ•°é‡é€‰æ‹©å™¨æœ€å¤§å€¼ | Number | null |
| show-quota-text | æ˜¯å¦æ˜¾ç¤ºé™è´­æç¤º | Boolean | false |
| installment-options | åˆ†æœŸé€‰é¡¹ | Array | [] |
| installment-title | åˆ†æœŸæ ‡é¢˜ | String | é€‰æ‹©åˆ†æœŸ |
| installment-tips | åˆ†æœŸæç¤ºè¯­ | String | (*åˆ†æœŸé™é¾™å¡ä¿¡ç”¨å¡æ”¯ä»˜) |
| show-installment-tips | æ˜¯å¦æ˜¾ç¤ºåˆ†æœŸæç¤ºè¯­ | Boolean | true |


**Events**
| äº‹ä»¶å | è¯´æ˜ | å›è°ƒå‚æ•° |
|--------|------|----------|
| add-to-cart | ç‚¹å‡»åŠ å…¥è´­ç‰©è½¦æ—¶è§¦å‘ | Object |
| buy-now | ç‚¹å‡»ç«‹å³è´­ä¹°æ—¶è§¦å‘ | Object |
| change-stepper | æ•°é‡æ”¹å˜æ—¶è§¦å‘ | Number |

**Slots**
| æ’æ§½å | è¯´æ˜ |
|------|------|
| origin-price | è‡ªå®šä¹‰åŸä»·æ˜¾ç¤º |
| select-installment | è‡ªå®šä¹‰åˆ†æœŸé€‰æ‹© |
| footer | åº•éƒ¨æ’æ§½ |



## ğŸ¨ æ ·å¼å®šåˆ¶
ç»„ä»¶ä½¿ç”¨ CSS å˜é‡è¿›è¡Œæ ·å¼å®šåˆ¶ï¼Œå¯é€šè¿‡è¦†ç›–å˜é‡æ¥ä¿®æ”¹æ ·å¼ï¼š
```css
:root {
  --popup-header-height: 180px;
  --popup-header-gap: 32px;
  --popup-img-size: 180px;
  --popup-price-font-size: 40px;
  --spec-title-font-size: 30px;
}
```

ç»„ä»¶å·²å†…ç½®ç§»åŠ¨ç«¯é€‚é…ï¼Œæ”¯æŒå®‰å…¨åŒºåŸŸå’Œè§¦æ‘¸ä¼˜åŒ–ã€‚



## æ‹“å±•ï¼š

PostCSSå®‰è£…æ•™ç¨‹ï¼š https://blog.csdn.net/Steven_Son/article/details/135554296

NVMå®‰è£…æ•™ç¨‹ï¼š[ä¸€å°ç”µè„‘å¦‚ä½•å®‰è£…å¤šä¸ªä¸åŒç‰ˆæœ¬çš„Nodeå¹¶èƒ½è‡ªç”±åˆ‡æ¢](https://blog.csdn.net/Steven_Son/article/details/135151622?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522f3795536d09d08fa8f870fe2df6415f3%2522%252C%2522scm%2522%253A%252220140713.130102334.pc%255Fblog.%2522%257D&request_id=f3795536d09d08fa8f870fe2df6415f3&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~blog~first_rank_ecpm_v1~rank_v31_ecpm-1-135151622-null-null.nonecase&utm_term=nvm&spm=1018.2226.3001.4450) 

Vue3+TS+ç§»åŠ¨ç«¯å¼€å‘è„šæ‰‹æ¶ï¼š[åŸºäºVue3.3 + TS + Vant4 + Vite5 + Pinia + Tailwindcssæ­å»ºçš„H5ç§»åŠ¨ç«¯å¼€å‘æ¨¡æ¿](https://blog.csdn.net/Steven_Son/article/details/135918101)

## âš ï¸ å…è´£å£°æ˜

æœ¬ç»„ä»¶æŒ‰â€œç°çŠ¶â€æä¾›ï¼Œä¸æä¾›ä»»ä½•å½¢å¼çš„æ‹…ä¿ã€‚ä½œè€…ä¸å¯¹å› ä½¿ç”¨æœ¬ç»„ä»¶è€Œå¯¼è‡´çš„ä»»ä½•ç›´æ¥æˆ–é—´æ¥æŸå¤±æ‰¿æ‹…è´£ä»»ã€‚



## å¦‚ä½•æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬

```js
// è‡ªåŠ¨
npm install vant4-sku@latest   
yarn add vant4-sku@latest

// æ‰‹åŠ¨    å‰ææ˜¯ä½ çŸ¥é“ç‰ˆæœ¬å·
npm install vant4-sku@1.X.X   
yarn add vant4-sku@1.X.X
```




## æ›´æ–°æ—¥å¿—

### v1.0.2
- ä¿®å¤é»˜è®¤ SKU æ— æ³•è‡ªåŠ¨é€‰ä¸­çš„é—®é¢˜
- ä¼˜åŒ–å›¾ç‰‡å±•ç¤ºé€»è¾‘
- ä¿®å¤éƒ¨åˆ† TypeScript ç±»å‹é”™è¯¯

### v1.0.3
- è§£å†³imgå›¾ç‰‡å› é˜²ç›—é“¾é—®é¢˜æ— æ³•æ­£å¸¸åŠ è½½çš„é—®é¢˜


